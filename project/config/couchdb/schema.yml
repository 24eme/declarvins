acVinCompte:
  type: abstract
  definition:
    fields:
      login: { }
      mot_de_passe: {  }
      email: {  }
      statut: {  }
      droits:
        type: array_collection
        definition:
          fields:
            '*': { }

_Compte:
  inheritance: acVinCompte
  type: abstract
  definition:
    fields:
      login: { }

_Tiers:
  type: abstract
  definition:
    fields:
      identifiant: { }
      nom: { }
      type: {  }
      statut: {  }

acVinCompteTiers:
  inheritance: _Compte
  definition:
    fields:
      _id: {  }
      _rev: {  }
      tiers:
        type: collection
        definition:
          fields:
            '*':
              type: collection
              definition:
                fields:
                  id: {  }
                  type: {  }
                  nom: {  }
                  interpro: {  }

CompteTiers:
  inheritance: acVinCompteTiers
  definition:
    fields:
      nom: {  }
      prenom: {  }
      fonction: {  }
      telephone: {  }
      fax: {  }
      type: {  }
      contrat: {  }
      interpro: 
        type: collection
        definition:
          fields:
            '*':
              type: collection
              definition:
                fields:
                  statut: {  }

Interpro:
  inheritance: _Tiers
  definition:
    fields:
      _id: {  }
      _rev: {  }

Etablissement:
  inheritance: _Tiers
  definition:
    fields:
      _id: {  }
      _rev: {  }
      interpro: {  }
      compte: {  }
      droits:
        type: array_collection
        definition:
          fields:
            '*': {  }
      num_interne: {  }
      siret: {  }
      cni: {  }
      cvi: {  }
      no_accises: {  }
      no_tva_intracommunautaire: {  }
      famille: {  }
      sous_famille: {  }
      email: {  }
      telephone: {  }
      fax: {  }
      siege:
          type: collection
          definition:
            fields:
              adresse: {  }
              code_postal: {  }
              commune: {  }
      comptabilite:
          type: collection
          definition:
            fields:
              adresse: {  }
              code_postal: {  }
              commune: {  }
      service_douane: {  }

Douane:
  inheritance: _Tiers
  definition:
    fields:
      _id: {  }
      _rev: {  }
      email: {  }

Contrat:
  definition:
    fields:
      _id: {  }
      _rev: {  }
      no_contrat: {  }
      type: {  }
      nom: {  }
      prenom: {  }
      fonction: {  }
      telephone: {  }
      fax: {  }
      compte: {  }
      etablissements:
        type: array_collection
        definition:
          fields:
            '*':
              type: collection
              definition:
                fields:
                  raison_sociale: {  }
                  siret: {  }
                  cni: {  }
                  cvi: {  }
                  no_accises: {  }
                  no_tva_intracommunautaire: {  }
                  adresse: {  }
                  code_postal: {  }
                  commune: {  }
                  telephone: {  }
                  fax: {  }
                  email: {  }
                  famille: {  }
                  sous_famille: {  }
                  comptabilite_adresse: {  }
                  comptabilite_code_postal: {  }
                  comptabilite_commune: {  }
                  service_douane: {  }

Vrac:
  definition:
    fields:
      _id: {  }
      _rev: {  }
      type: {  }
      produit: {  }
      numero: {  }
      acheteur:
        type: collection
        definition:
          fields:
            nom: {  }
      etablissement: {  }
      volume_promis: { type: float }
      volume_realise: { type: float }

Current:
  definition:
    fields:
      _id: {  }
      _rev: {  }
      type: {  }
      campagne: {  }

Configuration:
  definition:
    fields:
      _id: {  }
      _rev: {  }
      type: {  }
      campagne: {  }
      labels:
        type: collection
        definition:
          fields:
            '*': {  }
      libelle_detail_ligne:
        type: collection
        definition:
          fields:
            stocks_debut:
              type: collection
              definition:
                fields:
                  '*': {  }
            entrees:
              type: collection
              definition:
                fields:
                  '*': {  }
            sorties:
              type: collection
              definition:
                fields:
                  '*': {  }
            stocks_fin:
              type: collection
              definition:
                fields:
                  '*': {  }
      declaration:
        type: collection
        definition:
          fields:
            certifications:
              type: collection
              definition:
                fields:
                  '*':
                    # CERTIFICATION
                    class: ConfigurationCertification
                    inheritance: _ConfigurationDeclaration
                    type: collection
                    definition:
                      fields:
                        libelle: {  }
                        code: {  }
                        departements:
                          type: array_collection
                          definition:
                            fields:
                              '*': {  }
                        interpro:
                          type: collection
                          definition:
                            fields:
                              '*':
                                type: collection
                                definition:
                                  fields:
                                    labels:
                                      type: array_collection
                                      definition:
                                        fields:
                                          '*': {  }
                                    droits:
                                      type: collection
                                      definition:
                                        fields:
                                          douane:
                                            class: ConfigurationDroits
                                            type: array_collection
                                            definition:
                                              fields:
                                                '*':
                                                  class: ConfigurationDroit
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      date: {  }
                                                      taux: { type: float }
                                                      code: {  }
                                          cvo:
                                            class: ConfigurationDroits
                                            type: array_collection
                                            definition:
                                              fields:
                                                '*':
                                                  class: ConfigurationDroit
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      date: {  }
                                                      taux: { type: float }
                                                      code: {  }
                        appellations:
                          type: collection
                          definition:
                            fields:
                              '*':
                                # APPELLATION
                                class: ConfigurationAppellation
                                inheritance: _ConfigurationDeclaration
                                type: collection
                                definition:
                                  fields:
                                    libelle: {  }
                                    code: {  }
                                    detail:
                                      required: false
                                      class: ConfigurationDetail
                                      type: collection
                                      definition:
                                        fields:
                                          stocks_debut:
                                            required: false
                                            type: collection
                                            definition:
                                              fields:
                                                '*':
                                                  class: ConfigurationDetailLigne
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      readable: {  }
                                                      writable: {  }
                                          entrees:
                                            required: false
                                            type: collection
                                            definition:
                                              fields:
                                                '*':
                                                  class: ConfigurationDetailLigne
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      readable: {  }
                                                      writable: {  }
                                          sorties:
                                            required: false
                                            type: collection
                                            definition:
                                              fields:
                                                '*':
                                                  class: ConfigurationDetailLigne
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      readable: {  }
                                                      writable: {  }
                                          stocks_fin:
                                            required: false
                                            type: collection
                                            definition:
                                              fields:
                                                '*':
                                                  class: ConfigurationDetailLigne
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      readable: {  }
                                                      writable: {  }
                                    interpro:
                                      type: collection
                                      definition:
                                        fields:
                                          '*':
                                            type: collection
                                            definition:
                                              fields:
                                                labels:
                                                  type: array_collection
                                                  definition:
                                                    fields:
                                                      '*': {  }     
                                                droits:
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      douane:
                                                        class: ConfigurationDroits
                                                        type: array_collection
                                                        definition:
                                                          fields:
                                                            '*':
                                                              class: ConfigurationDroit
                                                              type: collection
                                                              definition:
                                                                fields:
                                                                  date: {  }
                                                                  taux: { type: float }
                                                                  code: {  }
                                                      cvo:
                                                        class: ConfigurationDroits
                                                        type: array_collection
                                                        definition:
                                                          fields:
                                                            '*':
                                                              class: ConfigurationDroit
                                                              type: collection
                                                              definition:
                                                                fields:
                                                                  date: {  }
                                                                  taux: { type: float }
                                                                  code: {  }
                                    departements:
                                      type: array_collection
                                      definition:
                                        fields:
                                          '*': {  }
                                    lieux:
                                      type: collection
                                      definition:
                                        fields:
                                          '*':
                                            # LIEU
                                            class: ConfigurationLieu
                                            inheritance: _ConfigurationDeclaration
                                            type: collection
                                            definition:
                                              fields:
                                                libelle: {  }
                                                code: {  }
                                                departements:
                                                  type: array_collection
                                                  definition:
                                                    fields:
                                                      '*': {  }
                                                detail:
                                                  required: false
                                                  class: ConfigurationDetail
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      stocks_debut:
                                                        required: false
                                                        type: collection
                                                        definition:
                                                          fields:
                                                            '*':
                                                              class: ConfigurationDetailLigne
                                                              type: collection
                                                              definition:
                                                                fields:
                                                                  readable: {  }
                                                                  writable: {  }
                                                      entrees:
                                                        required: false
                                                        type: collection
                                                        definition:
                                                          fields:
                                                            '*':
                                                              class: ConfigurationDetailLigne
                                                              type: collection
                                                              definition:
                                                                fields:
                                                                  readable: {  }
                                                                  writable: {  }
                                                      sorties:
                                                        required: false
                                                        type: collection
                                                        definition:
                                                          fields:
                                                            '*':
                                                              class: ConfigurationDetailLigne
                                                              type: collection
                                                              definition:
                                                                fields:
                                                                  readable: {  }
                                                                  writable: {  }
                                                      stocks_fin:
                                                        required: false
                                                        type: collection
                                                        definition:
                                                          fields:
                                                            '*':
                                                              class: ConfigurationDetailLigne
                                                              type: collection
                                                              definition:
                                                                fields:
                                                                  readable: {  }
                                                                  writable: {  }
                                                            departements:
                                                              type: array_collection
                                                              definition:
                                                                fields:
                                                                  '*': {  }
                                                couleurs: 
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      '*':
                                                        # COULEUR
                                                        class: ConfigurationCouleur
                                                        inheritance: _ConfigurationDeclaration
                                                        type: collection
                                                        definition:
                                                          fields:
                                                            libelle: {  }
                                                            code: {  }
                                                            departements:
                                                              type: array_collection
                                                              definition:
                                                                fields:
                                                                  '*': {  }
                                                            cepages: 
                                                              type: collection
                                                              definition:
                                                                fields:
                                                                  '*':
                                                                    # CEPAGE
                                                                    class: ConfigurationCepage
                                                                    inheritance: _ConfigurationDeclaration
                                                                    type: collection
                                                                    definition:
                                                                      fields:
                                                                        libelle: {  }
                                                                        code: {  }
                                                                        millesimes: 
                                                                          type: collection
                                                                          definition:
                                                                            fields:
                                                                              '*':
                                                                                # MILLESIME
                                                                                class: ConfigurationMillesime
                                                                                inheritance: _ConfigurationDeclaration
                                                                                type: collection
                                                                                definition:
                                                                                  fields:
                                                                                    libelle: {  }
                                                                                    code: {  }
                        detail:
                          class: ConfigurationDetail
                          type: collection
                          definition:
                            fields:
                              stocks_debut:
                                type: collection
                                definition:
                                  fields:
                                    '*':
                                      class: ConfigurationDetailLigne
                                      type: collection
                                      definition:
                                        fields:
                                          readable: {  }
                                          writable: {  }
                              entrees:
                                type: collection
                                definition:
                                  fields:
                                    '*':
                                      class: ConfigurationDetailLigne
                                      type: collection
                                      definition:
                                        fields:
                                          readable: {  }
                                          writable: {  }
                              sorties:
                                type: collection
                                definition:
                                  fields:
                                    '*':
                                      class: ConfigurationDetailLigne
                                      type: collection
                                      definition:
                                        fields:
                                          readable: {  }
                                          writable: {  }
                              stocks_fin:
                                type: collection
                                definition:
                                  fields:
                                    '*':
                                      class: ConfigurationDetailLigne
                                      type: collection
                                      definition:
                                        fields:
                                          readable: {  }
                                          writable: {  }
DRM:
  definition:
    fields:
      _id: {  }
      _rev: {  }
      type: {  }
      campagne: {  }
      precedente: {  }
      rectificative: { type: integer, required: false }
      produits:
        type: collection
        definition:
          fields:
            '*':
              # CERTIFICATION
              class: DRMProduitCertification
              type: collection
              definition:
                fields:
                  '*':
                    # APPELLATION
                    class: DRMProduitAppellation
                    type: array_collection
                    definition:
                      fields:
                        '*':
                          class: DRMProduit
                          type: collection
                          definition:
                            fields:
                              hashref: {  }
                              label:
                                type: array_collection
                                definition:
                                  fields:
                                    '*': {  }
                              label_supplementaire: {  }
                              pas_de_mouvement: {  }
      droits:
        type: collection
        definition:
          fields:
            douane:
              class: DRMDroits
              type: collection
              definition:
                fields:
                  '*':
                    class: DRMDroit
                    type: collection
                    definition:
                      fields:
                        volume_taxe: { type: integer }
                        volume_reintegre: { type: integer }
                        taux: { type: float }
                        code: {  }
                        total: { type: float }
                        report: { type: float }
                        cumul: { type: float }
            cvo:
              class: DRMDroits
              type: collection
              definition:
                fields:
                  '*':
                    class: DRMDroit
                    type: collection
                    definition:
                      fields:
                        volume_taxe: { type: integer }
                        volume_reintegre: { type: integer }
                        taux: { type: float }
                        code: {  }
                        total: { type: float }
                        report: { type: float }
                        cumul: { type: float }
      declaration:
        class: DRMDeclaration
        inheritance: _DRMTotal
        type: collection
        definition:
          fields:
            total_debut_mois: { type: float }
            total_entrees: { type: float }
            total_sorties: { type: float }
            total: { type: float }
            certifications:
              type: collection
              definition:
                fields:
                  '*':
                    # LABEL
                    class: DRMCertification
                    inheritance: _DRMTotal
                    type: collection
                    definition:
                      fields:
                        total_debut_mois: { type: float }
                        total_entrees: { type: float }
                        total_sorties: { type: float }
                        total: { type: float }
                        appellations:
                          type: collection
                          definition:
                            fields:
                              '*':
                                # APPELLATION
                                class: DRMAppellation
                                inheritance: _DRMTotal
                                type: collection
                                definition:
                                  fields:
                                    total_debut_mois: { type: float }
                                    total_entrees: { type: float }
                                    total_sorties: { type: float }
                                    total: { type: float }
                                    lieux:
                                      type: collection
                                      definition:
                                        fields:
                                          '*':
                                            # LIEU
                                            class: DRMLieu
                                            inheritance: _DRMTotal
                                            type: collection
                                            definition:
                                              fields:
                                                total_debut_mois: { type: float }
                                                total_entrees: { type: float }
                                                total_sorties: { type: float }
                                                total: { type: float }
                                                couleurs:
                                                  type: collection
                                                  definition:
                                                    fields:
                                                      '*':
                                                        # COULEUR
                                                        class: DRMCouleur
                                                        inheritance: _DRMTotal
                                                        type: collection
                                                        definition:
                                                          fields:
                                                            total_debut_mois: { type: float }
                                                            total_entrees: { type: float }
                                                            total_sorties: { type: float }
                                                            total: { type: float }
                                                            cepages:
                                                              type: collection
                                                              definition:
                                                                fields:
                                                                  '*':
                                                                    # CEPAGE
                                                                    class: DRMCepage
                                                                    inheritance: _DRMTotal
                                                                    type: collection
                                                                    definition:
                                                                      fields:
                                                                        total_debut_mois: { type: float }
                                                                        total_entrees: { type: float }
                                                                        total_sorties: { type: float }
                                                                        total: { type: float }
                                                                        millesimes:
                                                                          type: collection
                                                                          definition:
                                                                            fields:
                                                                              '*':
                                                                                # MILLESIME
                                                                                class: DRMMillesime
                                                                                inheritance: _DRMTotal
                                                                                type: collection
                                                                                definition:
                                                                                  fields:
                                                                                    total_debut_mois: { type: float }
                                                                                    total_entrees: { type: float }
                                                                                    total_sorties: { type: float }
                                                                                    total: { type: float }
                                                                                    details:
                                                                                      type: collection
                                                                                      definition:
                                                                                        fields:
                                                                                          '*':
                                                                                            class: DRMDetail
                                                                                            type: collection
                                                                                            definition:
                                                                                              fields:
                                                                                                total_debut_mois: { type: float }
                                                                                                total_entrees: { type: float }
                                                                                                total_sorties: { type: float }
                                                                                                total: { type: float }
                                                                                                label:
                                                                                                  type: array_collection
                                                                                                  definition:
                                                                                                    fields:
                                                                                                      '*': {  }
                                                                                                label_supplementaire: {  }
                                                                                                vrac:
                                                                                                  type: collection
                                                                                                  definition:
                                                                                                    fields:
                                                                                                      '*':
                                                                                                        type: collection
                                                                                                        definition:
                                                                                                          fields:
                                                                                                            volume: { type: float }
                                                                                                stocks_debut:
                                                                                                  type: collection
                                                                                                  class: DRMDetailNoeud
                                                                                                  definition:
                                                                                                    fields:
                                                                                                      bloque: { type: float }
                                                                                                      warrante: { type: float }
                                                                                                      instance: { type: float }
                                                                                                      commercialisable: { type: float }
                                                                                                entrees:
                                                                                                  type: collection
                                                                                                  class: DRMDetailNoeud
                                                                                                  definition:
                                                                                                    fields:
                                                                                                      achat: { type: float }
                                                                                                      recolte: { type: float }
                                                                                                      repli: { type: float }
                                                                                                      declassement: { type: float }
                                                                                                      mouvement: { type: float }
                                                                                                      crd: { type: float }
                                                                                                sorties:
                                                                                                  type: collection
                                                                                                  class: DRMDetailNoeud
                                                                                                  definition:
                                                                                                    fields:
                                                                                                      vrac: { type: float }
                                                                                                      export: { type: float }
                                                                                                      factures: { type: float }
                                                                                                      crd: { type: float }
                                                                                                      consommation: { type: float }
                                                                                                      pertes: { type: float }
                                                                                                      declassement: { type: float }
                                                                                                      repli: { type: float }
                                                                                                      mouvement: { type: float }
                                                                                                      distillation: { type: float }
                                                                                                      lies: { type: float }
                                                                                                stocks_fin:
                                                                                                  type: collection
                                                                                                  class: DRMDetailNoeud
                                                                                                  definition:
                                                                                                    fields:
                                                                                                      bloque: { type: float }
                                                                                                      warrante: { type: float }
                                                                                                      instance: { type: float }
                                                                                                      commercialisable: { type: float }
      declarant:
        type: collection
        class: DRMDeclarant
        definition:
          fields:
            nom: {  }
            siret: {  }
            cni: {  }
            cvi: {  }
            no_accises: {  }
            no_tva_intracommunautaire: {  }
            siege:
                type: collection
                definition:
                  fields:
                    adresse: {  }
                    code_postal: {  }
                    commune: {  }
            comptabilite:
                type: collection
                definition:
                  fields:
                    adresse: {  }
                    code_postal: {  }
                    commune: {  }
            service_douane: {  }
      declaratif:
        type: collection
        definition:
          fields:
            defaut_apurement: { type: integer }
            daa:
              type: collection
              definition:
                fields:
                  debut: { type: integer }
                  fin: { type: integer }
            dsa:
              type: collection
              definition:
                fields:
                  debut: { type: integer }
                  fin: { type: integer }
            adhesion_emcs_gamma: { type: integer }
            paiement:
              type: collection
              definition:
                fields:
                  douane:
                    class: DRMPaiement
                    type: collection
                    definition:
                      fields:
                        frequence: {  }
                        moyen: {  }
                  cvo:
                    class: DRMPaiement
                    type: collection
                    definition:
                      fields:
                        frequence: {  }
                        moyen: {  }
            caution:
              type: collection
              definition:
                fields:
                  dispense: { type: integer }
                  organisme: {  }
      identifiant: {  }
      mode_de_saisie: {  }
      interpros:
        type: array_collection
        definition:
          fields:
            '*': {  }
      valide:
        type: collection
        definition:
          fields:
            date: {}
            identifiant: {}
      douane:
        type: collection
        definition:
          fields:
            service: {  }
            envoi: {  }
            accuse: {  }
Messages:
  definition:
    fields:
      _id: {  }
      _rev: {  }
      type: {}
      '*': {}
